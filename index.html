<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Visor FBX ‚Ä¢ Anaglifo 3D</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>

  <!-- Estilos propios -->
  <link rel="stylesheet" href="./styles.css" />

  <!-- Import map de Three.js -->
  <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.168.0/build/three.module.js",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.168.0/examples/jsm/"
      }
    }
  </script>
</head>
<body>
  <!-- NAVBAR -->
  <nav class="navbar navbar-dark border-bottom border-primary-subtle glass-nav">
    <div class="container">
      <div class="d-flex align-items-center gap-2">
        <span class="logo-dot"></span>
        <a class="navbar-brand fw-semibold" href="#">Visor FBX ‚Ä¢ Anaglifo 3D</a>
      </div>
      <div class="d-flex gap-2 align-items-center">
        <span class="badge bg-gradient px-3">Three.js</span>
      </div>
    </div>
  </nav>

  <!-- MAIN -->
  <main class="container my-4">
    <div class="card shadow-visor glass-card overflow-hidden">
      <!-- Header: Controles principales -->
      <div class="card-header py-3 glass-header">
        <div class="row g-3 align-items-center">
          <div class="col-12 col-lg-3 d-flex align-items-center gap-2">
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="anaglyphToggle" checked>
              <label class="form-check-label" for="anaglyphToggle">Anaglifo (rojo/cian)</label>
            </div>
          </div>
          <div class="col-12 col-lg-5">
            <div class="row g-2">
              <div class="col-6">
                <button id="playPauseBtn" class="btn btn-ghost w-100" disabled>‚è∏Ô∏è Pausar</button>
              </div>
              <div class="col-6">
                <button id="recenterBtn" class="btn btn-ghost w-100" disabled>üéØ Recentrar</button>
              </div>
            </div>
          </div>
          <div class="col-12 col-lg-4 text-lg-end text-secondary small">
            Mueve con el mouse (OrbitControls). Usa lentes rojo/cian.
          </div>
        </div>
      </div>

      <!-- Visor -->
      <div class="card-body p-0">
        <div id="viewer"></div>
      </div>

      <!-- Panel de ajustes -->
      <div class="card-footer glass-footer">
        <div class="row g-4 align-items-end">
          <div class="col-12 col-lg-5">
            <label class="form-label mb-1">
              Separaci√≥n ocular (IPD): <output id="ipdVal">0.064</output> m
            </label>
            <input id="ipdRange" class="form-range" type="range"
                   min="0.030" max="0.120" step="0.001" value="0.064">
            <div class="form-text">Sube para ‚Äúm√°s 3D‚Äù (si hay ghosting, baja un poco).</div>
          </div>

          <div class="col-12 col-lg-5">
            <label class="form-label mb-1">
              Convergencia (focus): <output id="focusVal">10.0</output> u
            </label>
            <input id="focusRange" class="form-range" type="range"
                   min="1" max="50" step="0.1" value="10">
            <div class="form-text">Mueve el plano de cero-paralaje para comodidad visual.</div>
          </div>

          <div class="col-12 col-lg-2">
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="duboisToggle">
              <label class="form-check-label" for="duboisToggle">Filtro Dubois</label>
            </div>
            <div class="form-text">Reduce el ghosting en monitores LCD.</div>
          </div>
        </div>
      </div>
    </div>

    <p class="mt-4 small text-secondary text-center">
      Consejo: sirve la carpeta con un servidor local (VS Code Live Server o <code>python -m http.server</code>) para evitar CORS.
    </p>
  </main>

  <!-- FOOTER -->
  <footer class="container text-center text-secondary small my-4">
    Hecho con ‚ù§Ô∏è usando Three.js y Bootstrap.
  </footer>

  <!-- Bootstrap bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- App -->
  <script type="module" src="./app.js"></script>
</body>
</html>
